#DB 모델링

## [논리모델]
- 특정
### 1) 엔티티 식별
- 특정 값들의 집합
- 예)
  학생(이름, 전화, 이메일, 주소, ...)
  강의(강의명, 설명, 시작일, 종료일, 강의료, ...)
- 다른 말로 "테이블"이라고 한다.
- 데이터를 구성하는 값 => 속성(attribute)
   
### 2) 주 키 선정(Primary Key; PK)
- 데이터를 구분할 때 사용할 컬럼
- 한 개 이상의 컬럼으로 구성할 수 있다.
- 너무 복잡한 경우는 일련번호와 같은 임의의 컬럼을 추가하여 PK로 만든다.
- PK 컬럼 값을 다른 테이블에서 사용하고 있다면 변경할 수 없다.
 => 변경이 가능한 컬럼은 PK로 지정하지 말라!
   
### 3) 제1정규화
- 중복 데이터 또는 중복 컬럼을 별도의 테이블로 분리하여 부모-자식 관계를 맺는다.
- 중복 컬럼? 사진1, 사진2, 사진3
- 중복 데이터? 수강생 데이터, 강의 데이터, 강사 데이터, ...
  
### 4) 제2정규화
- PK가 여러 컬럼으로 이루어진 경우에 수행
- 모든 일반 컬럼은 반드시 PK 컬럼에 종속되어야 한다.
  그렇지 않은 일반 컬럼이 있다면 별도의 테이블로 분리하여 부모-자식 관계를 맺는다.

### 5) 제3정규화
- 어떤 컬럼이 PK가 아닌 다른 일반 컬럼에 종속되는 경우가 있다면 별도 테이블로 분리하여 부모-자식 관계를 맺는다.
   
### 6) 다 대 다 관계의 해소
- 테이블과 테이블 사이에 다 대 다 관계를 형성한다면, 일 대 다의 관계로 변경해야 한다.
- 왜? DBMS는 물리적으로 다 대 다 관계의 데이터를 저장할 수 없다.
- 해결책?
  두 테이블의 관계를 저장할 테이블을 만든다. "관계 테이블"이라 부른다.
  관계 테이블은 각 테이블과 일 대 다의 관계를 맺는다.
  
### 7) 관계의 개수 지정
- 데이터끼리 상호 관계의 개수를 지정한다.
- 예)
1    : *    (0이상) => FK 컬럼이 not null이다.
1    : 1..* (1이상) => FK 컬럼이 not null이다.
0..1 : *    (0이상) => FK 컬럼이 null 허용이다.
0..1 : 1..* (1이상) => FK 컬럼이 null 허용이다.

### 8) 유니크(Unique) 컬럼 지정
- PK는 아니지만 PK처럼 중복되어서는 안되는 컬럼을 지정한다.

### 9) null 허용 여부 지정
- 필수 입력 컬럼인지 선택 입력 컬럼인지 지정한다.

### 10) 테이블의 상속 관계
- 여러 테이블의 공통 컬럼을 별도 테이블로 분리하여 부모-자식 관계를 맺을 수 있다.

### 11) 조회 컬럼 지정
- 데이터를 찾을 때 검색 조건으로 사용할 컬럼을 지정한다.
- 조회 컬럼으로 지정하면 그 컬럼의 값으로 색인표가 자동으로 생성되어 데이터를 찾는 속도가 빨라진다.
- 장점 : select 속도가 빨라진다.
- 단점 : insert, update, delete 할 때마다 색인표를 갱신해야 하므로 속도가 느리다.

## [물리모델]
- 특정 DBMS에 맞춘 물리적인 모델링

### 12) DBMS에 맞춰서 테이블명과 컬럼명을 설정한다.
- DBMS에서 테이블명과 컬럼명을 작성할 때 다음의 규칙에 따라 보통 작성한다.
  예) first name(FST_NM), regist date(REG_DT), teacher assignment(TCH_ASN)
- 단어는 알파벳 3~4자로 축약해서 표현한다.
- 단어와 단어 사이는 밑줄(_)로 표현한다.

### 13) 도메인(domain) 정의 및 적용
- 비슷한 종류의 컬럼들을 묶어 한 새 타입으로 정의한다.
- 이점: 타입을 변경할 때 한 번에 여러 컬럼을 변경할 수 있어서 유지보수에 좋다.

### 14) 포워드 엔지니어링(forward enineering)


## 부모 테이블과 자식 테이블
### 부모 테이블
- 자식 테이블이 참조하는 데이터를 갖고 있는 테이블

### 자식 테이블
- 부모 테이블의 데이터를 참조하기 위해 그 데이터의 PK 값을 갖고 있는 테이블
### 외부키(Foreign Key; FK)
- 자식 테이블에서 부모 테이블의 특정 데이터를 가리키는 컬럼
- 반드시 부모 테이블의 PK 컬럼값을 저장해야 한다.
  다른 일반 컬럼의 값을 사용할 수 없다.

## 식별 관계와 비식별 관계
### 비식별 관계
- 관계를 표현하는 외부키가 그 테이블에서 식별자로 사용되지 않는 것
- 자식 테이블의 외부키가 그 테이블에서 일반 컬럼으로 사용될 때
### 식별 관계
- 관계를 표현하는 외부키가 그 테이블에서 식별자로 사용되는 것
- 자식 테이블의 외부키가 그 테이블에서 PK 컬럼으로 사용될 때